<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>spaghetti.Network &#8212; spaghetti v1.7.6 Manual</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=9afac83c" />
    <link rel="stylesheet" type="text/css" href="../_static/pysal-styles.css?v=4849bb1c" />
    <script src="../_static/documentation_options.js?v=6cfcd222"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="../_static/pysal_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="spaghetti.PointPattern" href="spaghetti.PointPattern.html" />
    <link rel="prev" title="API reference" href="../api.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          spaghetti</a>
        <span class="navbar-text navbar-version pull-left"><b>1.7.6</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../installation.html">Installation</a></li>
                <li><a href="../tutorials.html">Tutorials</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../references.html">References</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-with-conda-via-spaghetti-feedstock-highly-recommended">Installing with <code class="docutils literal notranslate"><span class="pre">conda</span></code> via spaghetti-feedstock (highly recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-with-python-package-index">Installing with Python Package Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#development-version">Development Version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/pointpattern-attributes.html">Network point pattern attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/connected-components.html">Connected components in a spatial network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/shortest-path-visualization.html">Generating regular lattices and visualizing shortest paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/network-segmentation.html">Spatial network segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/network-spatial-dependence.html">Network-constrained spatial dependence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/network-spatial-weights.html">Network spatial weights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/spanning-trees.html">Network spanning trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/caveats.html">Caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/network-spatial-autocorrelation.html">Network-constrained spatial autocorrelation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/facility-location.html">Demostrating network-based optimal facility location modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/transportation-problem.html">The Transportation Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/tsp.html">The Traveling Sales(man)(person) Problem — TSP</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#network-feature-instantiation">Network feature instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#network-feature-extraction-and-creation">Network feature extraction and creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#save-and-load-a-network">Save and load a network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">spaghetti.Network</a><ul>
<li><a class="reference internal" href="#spaghetti.Network"><code class="docutils literal notranslate"><span class="pre">Network</span></code></a><ul>
<li><a class="reference internal" href="#spaghetti.Network.__init__"><code class="docutils literal notranslate"><span class="pre">Network.__init__()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.GlobalAutoK"><code class="docutils literal notranslate"><span class="pre">Network.GlobalAutoK()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.Moran"><code class="docutils literal notranslate"><span class="pre">Network.Moran()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.allneighbordistances"><code class="docutils literal notranslate"><span class="pre">Network.allneighbordistances()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.compute_distance_to_vertices"><code class="docutils literal notranslate"><span class="pre">Network.compute_distance_to_vertices()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.compute_snap_dist"><code class="docutils literal notranslate"><span class="pre">Network.compute_snap_dist()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.contiguityweights"><code class="docutils literal notranslate"><span class="pre">Network.contiguityweights()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.count_per_link"><code class="docutils literal notranslate"><span class="pre">Network.count_per_link()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.distancebandweights"><code class="docutils literal notranslate"><span class="pre">Network.distancebandweights()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.enum_links_vertex"><code class="docutils literal notranslate"><span class="pre">Network.enum_links_vertex()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.extractgraph"><code class="docutils literal notranslate"><span class="pre">Network.extractgraph()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.full_distance_matrix"><code class="docutils literal notranslate"><span class="pre">Network.full_distance_matrix()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.identify_components"><code class="docutils literal notranslate"><span class="pre">Network.identify_components()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.loadnetwork"><code class="docutils literal notranslate"><span class="pre">Network.loadnetwork()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.nearestneighbordistances"><code class="docutils literal notranslate"><span class="pre">Network.nearestneighbordistances()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.savenetwork"><code class="docutils literal notranslate"><span class="pre">Network.savenetwork()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.shortest_paths"><code class="docutils literal notranslate"><span class="pre">Network.shortest_paths()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.simulate_observations"><code class="docutils literal notranslate"><span class="pre">Network.simulate_observations()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.snapobservations"><code class="docutils literal notranslate"><span class="pre">Network.snapobservations()</span></code></a></li>
<li><a class="reference internal" href="#spaghetti.Network.split_arcs"><code class="docutils literal notranslate"><span class="pre">Network.split_arcs()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="spaghetti-network">
<h1>spaghetti.Network<a class="headerlink" href="#spaghetti-network" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="spaghetti.Network">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spaghetti.</span></span><span class="sig-name descname"><span class="pre">Network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_sig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_arcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extractgraph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weightings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_atol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network" title="Link to this definition">¶</a></dt>
<dd><p>Spatially-constrained network representation and analytical
functionality. Naming conventions are as follows, (1) arcs and
vertices for the full network object, and (2) edges and nodes for
the simplified graph-theoretic object. The term ‘link’ is used to
refer to a network arc or a graph edge.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>in_data</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/glossary.html#term-iterable" title="(in Python v3.12)"><span>iterable</span></a>, <a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.cg.Chain.html#libpysal.cg.Chain" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.cg.Chain</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.0.0rc1.dev+3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a>}</span></dt><dd><p>The input geographic data. Either (1) a path to a shapefile
(str); (2) an iterable containing <code class="docutils literal notranslate"><span class="pre">libpysal.cg.Chain</span></code>
objects; (3) a single <code class="docutils literal notranslate"><span class="pre">libpysal.cg.Chain</span></code>; or
(4) a <code class="docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code>.</p>
</dd>
<dt><strong>vertex_sig</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>Round the x and y coordinates of all vertices to <code class="docutils literal notranslate"><span class="pre">vertex_sig</span></code>
significant digits (combined significant digits on the left and
right of the decimal place). Default is 11. Set to <code class="docutils literal notranslate"><span class="pre">None</span></code> for
no rounding.</p>
</dd>
<dt><strong>unique_arcs</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> (default), keep only unique arcs (i.e., prune
out any duplicated arcs). If <code class="docutils literal notranslate"><span class="pre">False</span></code> keep all segments.</p>
</dd>
<dt><strong>extractgraph</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, extract a graph-theoretic object with no degree 2
nodes. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><strong>w_components</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to not record connected components from a
<code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> object. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><strong>weightings</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>}</span></dt><dd><p>If dict, lists of weightings for each arc. If bool,
<code class="docutils literal notranslate"><span class="pre">True</span></code> flags <code class="docutils literal notranslate"><span class="pre">self.arc_lengths</span></code> as the weightings,
<code class="docutils literal notranslate"><span class="pre">False</span></code> sets no weightings. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>weights_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keyword arguments for <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">dict()</span></code>.</p>
</dd>
<dt><strong>vertex_atol</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>}</span></dt><dd><p>Precision for vertex absolute tolerance. Round vertex coordinates to
<code class="docutils literal notranslate"><span class="pre">vertex_atol</span></code> decimal places. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>. <strong>ONLY</strong> change
the default when there are known issues with digitization.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><strong>Important</strong>: The core procedure for generating network representations is
performed within the <code class="docutils literal notranslate"><span class="pre">_extractnetwork()</span></code> method. Here it is important to note
that a <code class="docutils literal notranslate"><span class="pre">spaghetti.Network</span></code> instance is built up from the individual,
constituent euclidean units of each line segment object. Therefore, the resulting
network structure will generally have (1) more vertices and links than may expected,
and, (2) many degree-2 vertices, which differs from a truly graph-theoretic object.
This is demonstrated in the
<a class="reference external" href="https://pysal.org/spaghetti/notebooks/caveats.html">Caveats Tutorial</a>.</p>
<p>See <span id="id1">[<a class="reference internal" href="../references.html#id16" title="A.D. Cliff and P. Haggett. Graph Theory. In N. Wrigley and R.J. Bennett, editors, Quantitative Geography: A British View, chapter 22, pages 225–234. Routledge &amp; Kegan Paul, London, 1981.">CH81</a>]</span>, <span id="id2">[<a class="reference internal" href="../references.html#id17" title="Barbaros C. Tansel and Timothy J. Francis, Richard L .and Lowe. State of the Art—Location on Networks: A survey. Part I: The p-center and p-median Problems. Management Science, 29(4):482–497, 1983. doi:https://doi.org/10.1287/mnsc.29.4.482.">TF83</a>]</span>,
<span id="id3">[<a class="reference internal" href="../references.html#id18" title="Ravindra K. Ahuja, Thomas L. Magnanti, and James B. Orlin. Network Flows: Theory, Algorithms, and Applications. Prentice Hall, Englewood Cliffs, N.J., 1993. ISBN 013617549X.">AMO93</a>]</span>, <span id="id4">[<a class="reference internal" href="../references.html#id19" title="Martine Labbé, Dominique Peeters, and Jacques-François Thisse. Location on Networks. In Network Routing, volume 8 of Handbooks in Operations Research and Management Science, chapter 7, pages 551–624. Elsevier, 1995. doi:10.1016/S0927-0507(05)80111-2.">LPT95</a>]</span>,
<span id="id5">[<a class="reference internal" href="../references.html#id20" title="M.J. Kuby, T.D. Roberts, C.D. Upchurch, and S. Tierney. Network Analysis. In Rob Kitchin and Nigel Thrift, editors, International Encyclopedia of Human Geography, pages 391–398. Elsevier, Oxford, 2009. doi:https://doi.org/10.1016/B978-008044910-4.00481-8.">KRUT09</a>]</span>, <span id="id6">[<a class="reference internal" href="../references.html#id21" title="Marc Barthélemy. Spatial networks. Physics Reports, 499(1–3):1–101, 2011. doi:https://doi.org/10.1016/j.physrep.2010.11.002.">Bar11</a>]</span>,
<span id="id7">[<a class="reference internal" href="../references.html#id23" title="Mark S. Daskin. Network and Discrete Location: Models, Algorithms, and Applications, Second Edition. John Wiley &amp; Sons, Ltd, 2013. ISBN 9781118537015. doi:10.1002/9781118537015.">Das13</a>]</span>, <span id="id8">[<a class="reference internal" href="../references.html#id22" title="Atsuyki Okabe and Kokichi Sugihara. Spatial Analysis Along Networks. John Wiley &amp; Sons, Inc., West Sussex, UK, 2012. doi:10.1002/9781119967101.">OS12d</a>]</span>,
<span id="id9">[<a class="reference internal" href="../references.html#id24" title="César Ducruet and Laurent Beauguitte. Spatial Science and Network Science: Review and Outcomes of a Complex Relationship. Networks and Spatial Economics, 14(3–4):297–316, 2014. doi:10.1007/s11067-013-9222-6.">DB14</a>]</span>, <span id="id10">[<a class="reference internal" href="../references.html#id25" title="Joe Weber. The Properties of Topological Network Connectivity Measures and Their Application to U.S. Urban Freeway Networks. The Professional Geographer, 0124(January):1–11, 2016. doi:10.1080/00330124.2015.1106324.">Web16</a>]</span>, for more in-depth discussion on
spatial networks, graph theory, and location along networks.
For related network-centric software see
<a class="reference external" href="https://github.com/tomalrussell/snkit">Snkit</a> <span id="id11">[<a class="reference internal" href="../references.html#id36" title="Tom Russell and Elco Koks. tomalrussell/snkit: v1.6.0. August 2019. doi:10.5281/zenodo.3379659.">RK19</a>]</span>,
<a class="reference external" href="http://sanet.csis.u-tokyo.ac.jp">SANET</a> <span id="id12">[<a class="reference internal" href="../references.html#id26" title="Atsuyuki Okabe, Keiichi Okunuki, and Shino Shiode. SANET: A Toolbox for Spatial Analysis on a Network. Geographical Analysis, 38:57–66, 2006. doi:10.1111/j.0016-7363.2005.00674.x.">OOS06</a>]</span>,
<a class="reference external" href="https://networkx.github.io">NetworkX</a> <span id="id13">[<a class="reference internal" href="../references.html#id27" title="A.A. Hagberg, D.A. Schult, and P.J. Swart. Exploring Network Structure, Dynamics, and Function using NetworkX. In G. Varoquaux, T. Vaught, and J. Millman, editors, Proceedings of the 7th Python in Science Conference (SciPy 2008), 11–15. Pasadena, CA USA, 2008.">HSS08</a>]</span>,
<a class="reference external" href="http://udst.github.io/pandana/">Pandana</a> <span id="id14">[<a class="reference internal" href="../references.html#id28" title="Fletcher Foti, Paul Waddell, and Dennis Luxen. A Generalized Computational Framework for Accessibility: From the Pedestrian to the Metropolitan Scale. 4th Transportation Research Board Conference on Innovations in Travel Modeling (ITM), pages 1–14, 2012.">FWL12</a>]</span>,
and <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/">OSMnx</a> <span id="id15">[<a class="reference internal" href="../references.html#id29" title="Geoff Boeing. OSMnx: New Methods for Acquiring, Constructing, Analyzing, and Visualizing Complex Street Networks. Computers, Environment and Urban Systems, 65:126–139, 2017. doi:10.1016/j.compenvurbsys.2017.05.004.">Boe17</a>]</span>.</p>
<p class="rubric">Examples</p>
<p>Create an instance of a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streets_file</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">in_data</span><span class="o">=</span><span class="n">streets_file</span><span class="p">)</span>
</pre></div>
</div>
<p>Fetch the number connected components in the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">network_n_components</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Unique component labels in the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ntw</span><span class="o">.</span><span class="n">network_component_labels</span><span class="p">))</span>
<span class="go">[np.int32(0)]</span>
</pre></div>
</div>
<p>Show whether each component of the network is an isolated ring (or not).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">network_component_is_ring</span>
<span class="go">{np.int32(0): False}</span>
</pre></div>
</div>
<p>Show how many network arcs are associated with the component.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arcs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ntw</span><span class="o">.</span><span class="n">network_component2arc</span><span class="p">[</span><span class="n">ntw</span><span class="o">.</span><span class="n">network_component_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arcs</span>
<span class="go">303</span>
</pre></div>
</div>
<p>Do the same as above, but for the graph-theoretic representation
of the network object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">graph_n_components</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ntw</span><span class="o">.</span><span class="n">graph_component_labels</span><span class="p">))</span>
<span class="go">[np.int32(0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">graph_component_is_ring</span>
<span class="go">{np.int32(0): False}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edges</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ntw</span><span class="o">.</span><span class="n">graph_component2edge</span><span class="p">[</span><span class="n">ntw</span><span class="o">.</span><span class="n">graph_component_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edges</span>
<span class="go">179</span>
</pre></div>
</div>
<p>The number of arcs in the network is always greater than or equal
to the number of edges in the graph-theoretic representation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arcs</span> <span class="o">&gt;=</span> <span class="n">edges</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Snap point observations to the network with attribute information.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crimes_file</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;crimes.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">crimes_file</span><span class="p">,</span> <span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>And without attribute information.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schools_file</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;schools.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">schools_file</span><span class="p">,</span> <span class="s2">&quot;schools&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Show the point patterns associated with the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">pointpatterns</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&#39;crimes&#39;, &#39;schools&#39;])</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>adjacencylist</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>List of lists storing vertex adjacency.</p>
</dd>
<dt><strong>vertex_coords</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are vertex IDs and values are <span class="math notranslate nohighlight">\((x,y)\)</span> coordinates of the vertices.</p>
</dd>
<dt><strong>vertex_list</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>List of vertex IDs.</p>
</dd>
<dt><strong>vertices</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are tuples of vertex coords and values are the vertex ID.</p>
</dd>
<dt><strong>arcs</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>List of arcs, where each arc is a sorted tuple
of vertex IDs.</p>
</dd>
<dt><strong>arc_lengths</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are tuples of sorted vertex IDs representing an arc and
values are the length.</p>
</dd>
<dt><strong>pointpatterns</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are a string name of the pattern and values are
<code class="docutils literal notranslate"><span class="pre">PointPattern</span></code> class instances.</p>
</dd>
<dt><strong>distance_matrix</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></span></dt><dd><p>All network vertices (non-observations) distance matrix. Distances
between vertices in disparate components are recorded as <code class="docutils literal notranslate"><span class="pre">inf</span></code>
by default.</p>
</dd>
<dt><strong>network_trees</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are the vertex IDs (<code class="docutils literal notranslate"><span class="pre">int</span></code>). Values are dictionaries
with the keys being the IDs of the destination vertex
and values being lists of vertices along the shortest path.
If the destination vertex is a) the origin or b)
unreachable (disparate component) it is listed as itself being the
neighbor.</p>
</dd>
<dt><strong>edges</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>Tuples of graph edge IDs.</p>
</dd>
<dt><strong>edge_lengths</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are the graph edge IDs (<code class="docutils literal notranslate"><span class="pre">tuple</span></code>). Values are the
graph edge length (<code class="docutils literal notranslate"><span class="pre">float</span></code>).</p>
</dd>
<dt><strong>non_articulation_points</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>All vertices with degree 2 that are not in an isolated
island ring (loop) component.</p>
</dd>
<dt><strong>w_network</strong><span class="classifier"><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></span></dt><dd><p>Weights object created from the network arcs.</p>
</dd>
<dt><strong>network_n_components</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>Count of connected components in the network.</p>
</dd>
<dt><strong>network_fully_connected</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the network representation is a single connected
component, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>network_component_labels</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></span></dt><dd><p>Component labels for network arcs.</p>
</dd>
<dt><strong>network_component2arc</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Lookup in the form {int: list} for arcs comprising network
connected components keyed by component labels with arcs in
a list as values.</p>
</dd>
<dt><strong>network_component_lengths</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Length of each network component (keyed by component label).</p>
</dd>
<dt><strong>network_longest_component</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The ID of the longest component in the network. This is not
necessarily equal to <code class="docutils literal notranslate"><span class="pre">network_largest_component</span></code>.</p>
</dd>
<dt><strong>network_component_vertices</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Lookup in the form {int: list} for vertices comprising network
connected components keyed by component labels with vertices in
a list as values.</p>
</dd>
<dt><strong>network_component_vertex_count</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>The number of vertices in each network component
(keyed by component label).</p>
</dd>
<dt><strong>network_largest_component</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The ID of the largest component in the network. Within <code class="docutils literal notranslate"><span class="pre">spaghetti</span></code>
the largest component is the one with the most vertices. This is not
necessarily equal to <code class="docutils literal notranslate"><span class="pre">network_longest_component</span></code>.</p>
</dd>
<dt><strong>network_component_is_ring</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Lookup in the form {int: bool} keyed by component labels with values
as <code class="docutils literal notranslate"><span class="pre">True</span></code> if the component is a closed ring, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>w_graph</strong><span class="classifier"><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></span></dt><dd><p>Weights object created from the graph edges.</p>
</dd>
<dt><strong>graph_n_components</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>Count of connected components in the network.</p>
</dd>
<dt><strong>graph_fully_connected</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the graph representation is a single connected
component, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>graph_component_labels</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></span></dt><dd><p>Component labels for graph edges.</p>
</dd>
<dt><strong>graph_component2edge</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Lookup in the form {int: list} for edges comprising graph connected
components keyed by component labels with edges in a list
as values.</p>
</dd>
<dt><strong>graph_component_lengths</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Length of each graph component (keyed by component label).</p>
</dd>
<dt><strong>graph_longest_component</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The ID of the longest component in the graph. This is not
necessarily equal to <code class="docutils literal notranslate"><span class="pre">graph_largest_component</span></code>.</p>
</dd>
<dt><strong>graph_component_vertices</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Lookup in the form {int: list} for vertices comprising graph
connected components keyed by component labels with vertices in
a list as values.</p>
</dd>
<dt><strong>graph_component_vertex_count</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>The number of vertices in each graph component
(keyed by component label).</p>
</dd>
<dt><strong>graph_largest_component</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The ID of the largest component in the graph. Within <code class="docutils literal notranslate"><span class="pre">spaghetti</span></code>
the largest component is the one with the most vertices. This is not
necessarily equal to <code class="docutils literal notranslate"><span class="pre">graph_longest_component</span></code>.</p>
</dd>
<dt><strong>graph_component_is_ring</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Lookup in the form {int: bool} keyed by component labels with values as
<code class="docutils literal notranslate"><span class="pre">True</span></code> if the component is a closed ring, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_sig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_arcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extractgraph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weightings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex_atol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.__init__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.GlobalAutoK" title="spaghetti.Network.GlobalAutoK"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GlobalAutoK</span></code></a>(pointpattern[, nsteps, ...])</p></td>
<td><p>Compute a global auto <span class="math notranslate nohighlight">\(K\)</span>-function based on a network constrained cost matrix through <a class="reference external" href="https://en.wikipedia.org/wiki/Monte_Carlo_method">Monte Carlo simulation</a> according to the formulation adapted from <span id="id16">[<a class="reference internal" href="../references.html#id8" title="D. ÓSullivan and D. J. Unwin. Point Pattern Analysis, chapter 5, pages 121-156. John Wiley &amp; Sons, Ltd, 2010. doi:10.1002/9780470549094.ch5.">OU10</a>]</span>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.Moran" title="spaghetti.Network.Moran"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Moran</span></code></a>(pp_name[, permutations, graph])</p></td>
<td><p>Calculate a Moran's <em>I</em> statistic on a set of observations based on network arcs.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.__init__" title="spaghetti.Network.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>([in_data, vertex_sig, unique_arcs, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.allneighbordistances" title="spaghetti.Network.allneighbordistances"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allneighbordistances</span></code></a>(sourcepattern[, ...])</p></td>
<td><p>Compute either all distances between <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span> in a single point pattern or all distances between each <span class="math notranslate nohighlight">\(i\)</span> from a source pattern and all <span class="math notranslate nohighlight">\(j\)</span> from a destination pattern.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.compute_distance_to_vertices" title="spaghetti.Network.compute_distance_to_vertices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_distance_to_vertices</span></code></a>(x, y, arc)</p></td>
<td><p>Given an observation on a network arc, return the distance to the two vertices that bound that end.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.compute_snap_dist" title="spaghetti.Network.compute_snap_dist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_snap_dist</span></code></a>(pattern, idx)</p></td>
<td><p>Given an observation snapped to a network arc, calculate the distance from the original location to the snapped location.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.contiguityweights" title="spaghetti.Network.contiguityweights"><code class="xref py py-obj docutils literal notranslate"><span class="pre">contiguityweights</span></code></a>([graph, weightings, ...])</p></td>
<td><p>Create a contiguity-based <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.count_per_link" title="spaghetti.Network.count_per_link"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_per_link</span></code></a>(obs_on[, graph])</p></td>
<td><p>Compute the counts per arc or edge (link).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.distancebandweights" title="spaghetti.Network.distancebandweights"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distancebandweights</span></code></a>(threshold[, ...])</p></td>
<td><p>Create distance-based weights.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.enum_links_vertex" title="spaghetti.Network.enum_links_vertex"><code class="xref py py-obj docutils literal notranslate"><span class="pre">enum_links_vertex</span></code></a>(v0)</p></td>
<td><p>Returns the arcs (links) adjacent to vertices.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.extractgraph" title="spaghetti.Network.extractgraph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extractgraph</span></code></a>()</p></td>
<td><p>Using the existing network representation, create a graph-theoretic representation by removing all vertices with a neighbor incidence of two (non-articulation points).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.full_distance_matrix" title="spaghetti.Network.full_distance_matrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_distance_matrix</span></code></a>(n_processes[, gen_tree])</p></td>
<td><p>All vertex-to-vertex distances on a network.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.identify_components" title="spaghetti.Network.identify_components"><code class="xref py py-obj docutils literal notranslate"><span class="pre">identify_components</span></code></a>(w[, graph])</p></td>
<td><p>Identify connected component information from a <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.loadnetwork" title="spaghetti.Network.loadnetwork"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadnetwork</span></code></a>(filename)</p></td>
<td><p>Load a network from a binary file saved on disk.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.nearestneighbordistances" title="spaghetti.Network.nearestneighbordistances"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nearestneighbordistances</span></code></a>(sourcepattern[, ...])</p></td>
<td><p>Compute the interpattern nearest neighbor distances or the intrapattern nearest neighbor distances between a source pattern and a destination pattern.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.savenetwork" title="spaghetti.Network.savenetwork"><code class="xref py py-obj docutils literal notranslate"><span class="pre">savenetwork</span></code></a>(filename)</p></td>
<td><p>Save a network to disk as a binary file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.shortest_paths" title="spaghetti.Network.shortest_paths"><code class="xref py py-obj docutils literal notranslate"><span class="pre">shortest_paths</span></code></a>(tree, pp_orig[, pp_dest])</p></td>
<td><p>Return the shortest paths between observation points as <code class="docutils literal notranslate"><span class="pre">libpysal.cg.Chain</span></code> objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.simulate_observations" title="spaghetti.Network.simulate_observations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simulate_observations</span></code></a>(count[, distribution])</p></td>
<td><p>Generate a simulated point pattern on the network.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spaghetti.Network.snapobservations" title="spaghetti.Network.snapobservations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">snapobservations</span></code></a>(in_data, name[, ...])</p></td>
<td><p>Snap a point pattern shapefile to a network object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spaghetti.Network.split_arcs" title="spaghetti.Network.split_arcs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_arcs</span></code></a>(split_param[, split_by, ...])</p></td>
<td><p>Split all network arcs at either a fixed distance or fixed count.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.GlobalAutoK">
<span class="sig-name descname"><span class="pre">GlobalAutoK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pointpattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsteps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distribution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'uniform'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upperbound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.GlobalAutoK"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.GlobalAutoK" title="Link to this definition">¶</a></dt>
<dd><p>Compute a global auto <span class="math notranslate nohighlight">\(K\)</span>-function based on a network constrained
cost matrix through
<a class="reference external" href="https://en.wikipedia.org/wiki/Monte_Carlo_method">Monte Carlo simulation</a>
according to the formulation adapted from
<span id="id18">[<a class="reference internal" href="../references.html#id8" title="D. ÓSullivan and D. J. Unwin. Point Pattern Analysis, chapter 5, pages 121-156. John Wiley &amp; Sons, Ltd, 2010. doi:10.1002/9780470549094.ch5.">OU10</a>]</span>. See the <strong>Notes</strong>
section for further description.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>pointpattern</strong><span class="classifier"><a class="reference internal" href="spaghetti.PointPattern.html#spaghetti.PointPattern" title="spaghetti.PointPattern"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spaghetti.PointPattern</span></code></a></span></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">spaghetti</span></code> point pattern object.</p>
</dd>
<dt><strong>nsteps</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The number of steps at which the count of the nearest
neighbors is computed. Default is <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
</dd>
<dt><strong>permutations</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The number of permutations to perform. Default is <code class="docutils literal notranslate"><span class="pre">99</span></code>.</p>
</dd>
<dt><strong>threshold</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The level at which significance is computed.
(0.5 would be 97.5% and 2.5%). Default is <code class="docutils literal notranslate"><span class="pre">0.5</span></code>.</p>
</dd>
<dt><strong>distribution</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>The distribution from which random points are sampled.
Currently, the only supported distribution is <code class="docutils literal notranslate"><span class="pre">'uniform'</span></code>.</p>
</dd>
<dt><strong>upperbound</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The upper bound at which the <span class="math notranslate nohighlight">\(K\)</span>-function is computed.
Defaults to the maximum observed nearest neighbor distance.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>GlobalAutoK</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spaghetti.analysis.GlobalAutoK</span></code></span></dt><dd><p>The global auto <span class="math notranslate nohighlight">\(K\)</span>-function class instance.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">pointpats.K</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The <span class="math notranslate nohighlight">\(K\)</span>-function can be formulated as:</p>
<div class="math notranslate nohighlight">
\[\displaystyle K(r)=\frac{\sum^n_{i=1} \#[\hat{A} \in D(a_i, r)]}{n\lambda},\]</div>
<p>where $n$ is the set cardinality of <span class="math notranslate nohighlight">\(A\)</span>, <span class="math notranslate nohighlight">\(\hat{A}\)</span> is the
subset of observations in <span class="math notranslate nohighlight">\(A\)</span> that are within <span class="math notranslate nohighlight">\(D\)</span> units of
distance from <span class="math notranslate nohighlight">\(a_i\)</span> (each single observation in <span class="math notranslate nohighlight">\(A\)</span>), and <span class="math notranslate nohighlight">\(r\)</span>
is the range of distance values over which the <span class="math notranslate nohighlight">\(K\)</span>-function is
calculated. The <span class="math notranslate nohighlight">\(\lambda\)</span> term is the intensity of observations
along the network, calculated as:</p>
<div class="math notranslate nohighlight">
\[\displaystyle \lambda = \frac{n}{\big|N_{arcs}\big|},\]</div>
<p>where <span class="math notranslate nohighlight">\(\big|N_{arcs}\big|\)</span> is the summed length of network arcs.
The global auto <span class="math notranslate nohighlight">\(K\)</span>-function measures overall clustering in one set of
observations by comparing all intra-set distances over a range of
distance buffers <span class="math notranslate nohighlight">\(D \in r\)</span>. The <span class="math notranslate nohighlight">\(K\)</span>-function improves upon
nearest-neighbor distance measures through the analysis of all neighbor
distances. For an explanation on how to interpret the results of the
<span class="math notranslate nohighlight">\(K\)</span>-function see the Network Spatial Dependence tutorial
<a class="reference external" href="https://pysal.org/spaghetti/notebooks/network-spatial-dependence.html">here</a>.</p>
<p>For original implementation see <span id="id19">[<a class="reference internal" href="../references.html#id9" title="Brian David Ripley. The Second-Order Analysis of Stationary Point Processes. Journal of Applied Probability, 13(2):255–266, 1976. doi:10.2307/3212829.">Rip76</a>]</span>
and <span id="id20">[<a class="reference internal" href="../references.html#id10" title="Brian David Ripley. Modelling Spatial Patterns. Journal of the Royal Statistical Society, 39(2):172–212, 1977. doi:10.1111/j.2517-6161.1977.tb01615.x.">Rip77</a>]</span>.
For further Network-<cite>K</cite> formulations see
<span id="id21">[<a class="reference internal" href="../references.html#id4" title="Atsuyuki Okabe and Ikuho Yamada. The K-Function Method on a Network and Its Computational Implementation. Geographical Analysis, 33(3):271-290, 2001. doi:10.1111/j.1538-4632.2001.tb00448.x.">OY01</a>]</span>,
<span id="id22">[<a class="reference internal" href="../references.html#id7" title="Atsuyki Okabe and Kokichi Sugihara. Network K Function Methods, chapter 6, pages 119-136. John Wiley &amp; Sons, Ltd, 2012. doi:10.1002/9781119967101.ch6.">OS12b</a>]</span>, and
<span id="id23">[<a class="reference internal" href="../references.html#id3" title="Adrian Baddeley, Gopalan Nair, Suman Rakshit, Greg McSwiggan, and Tilman M. Davies. Analysing point patterns on networks - A review. Spatial Statistics, pages 100435, 2020. doi:10.1016/j.spasta.2020.100435.">BNR+20</a>]</span>.</p>
<p class="rubric">Examples</p>
<p>Create a network instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">in_data</span><span class="o">=</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observation points onto the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pt_str</span> <span class="o">=</span> <span class="s2">&quot;schools&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_data</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">pt_str</span><span class="o">+</span><span class="s2">&quot;.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">in_data</span><span class="p">,</span> <span class="n">pt_str</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schools</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">pointpatterns</span><span class="p">[</span><span class="n">pt_str</span><span class="p">]</span>
</pre></div>
</div>
<p>Compute a <span class="math notranslate nohighlight">\(K\)</span>-function from school observations
with <code class="docutils literal notranslate"><span class="pre">99</span></code> <code class="docutils literal notranslate"><span class="pre">permutations</span></code> at <code class="docutils literal notranslate"><span class="pre">10</span></code> intervals.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kres</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">GlobalAutoK</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">permutations</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">nsteps</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kres</span><span class="o">.</span><span class="n">lowerenvelope</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.Moran">
<span class="sig-name descname"><span class="pre">Moran</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.Moran"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.Moran" title="Link to this definition">¶</a></dt>
<dd><p>Calculate a Moran’s <em>I</em> statistic on a set of observations
based on network arcs. The Moran’s <em>I</em> test statistic allows
for the inference of how clustered (or dispersed) a dataset is
while considering both attribute values and spatial relationships.
A value of closer to +1 indicates absolute clustering while a
value of closer to -1 indicates absolute dispersion. Complete
spatial randomness takes the value of 0. See the <code class="docutils literal notranslate"><span class="pre">esda</span></code>
<a class="reference external" href="https://pysal.org/esda/generated/esda.Moran.html#esda.Moran">documentation</a>
for in-depth descriptions and tutorials.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>pp_name</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>The name of the point pattern in question.</p>
</dd>
<dt><strong>permutations</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The number of permutations to perform. Default is <code class="docutils literal notranslate"><span class="pre">999</span></code>.</p>
</dd>
<dt><strong>graph</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Perform the Moran calculation on the graph <cite>W</cite> object
(<code class="docutils literal notranslate"><span class="pre">True</span></code>). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>, which performs the
Moran calculation on the network <cite>W</cite> object.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>moran</strong><span class="classifier"><a class="reference external" href="https://pysal.org/esda/generated/esda.Moran.html#esda.Moran" title="(in esda v0.1.dev1+ga296c39)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">esda.Moran</span></code></a></span></dt><dd><p>A Moran’s <em>I</em> statistic object results.</p>
</dd>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>The y-axis (counts).</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See <span id="id24">[<a class="reference internal" href="../references.html#id54" title="A.D. Cliff and J.K. Ord. Spatial Processes: Models and Applications. Pion, London, 1981.">CO81</a>]</span> and <span id="id25">[<a class="reference internal" href="../references.html#id14" title="S.J. Rey, L.J. Wolf, W. Kang, P. Stephens, J. Laura, C. Schmidt, D. Arribas-Bel, S. Lumnitz, J.C. Duque, D.C. Folch, L. Anselin, N. Malizia, J.D. Gaboardi, F. Fernandes, M. Seth, mhwang4, and mlyons-tcc. pysal/esda. July 2019. doi:10.5281/zenodo.3265190.">RWK+19</a>]</span> for more details.</p>
<p class="rubric">Examples</p>
<p>Create a network instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">in_data</span><span class="o">=</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observation points onto the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crimes</span> <span class="o">=</span> <span class="s2">&quot;crimes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_data</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">crimes</span><span class="o">+</span><span class="s2">&quot;.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">in_data</span><span class="p">,</span> <span class="n">crimes</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Compute a Moran’s <span class="math notranslate nohighlight">\(I\)</span> from crime observations.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">moran_res</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">Moran</span><span class="p">(</span><span class="n">crimes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">moran_res</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">np.float64(0.005193)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.allneighbordistances">
<span class="sig-name descname"><span class="pre">allneighbordistances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sourcepattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destpattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_diagonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gen_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snap_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.allneighbordistances"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.allneighbordistances" title="Link to this definition">¶</a></dt>
<dd><p>Compute either all distances between <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span> in a
single point pattern or all distances between each <span class="math notranslate nohighlight">\(i\)</span> from a
source pattern and all <span class="math notranslate nohighlight">\(j\)</span> from a destination pattern.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>sourcepattern</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="spaghetti.PointPattern.html#spaghetti.PointPattern" title="spaghetti.PointPattern"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spaghetti.PointPattern</span></code></a>}</span></dt><dd><p>The key of a point pattern snapped to the network or
the full <code class="docutils literal notranslate"><span class="pre">spaghetti.PointPattern</span></code> object.</p>
</dd>
<dt><strong>destpattern</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>(Optional) The key of a point pattern snapped to the network
or the full <code class="docutils literal notranslate"><span class="pre">spaghetti.PointPattern</span></code> object.</p>
</dd>
<dt><strong>fill_diagonal</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>}</span></dt><dd><p>(Optional) Fill the diagonal of the cost matrix. Default is
<code class="docutils literal notranslate"><span class="pre">None</span></code> and will populate the diagonal with <code class="docutils literal notranslate"><span class="pre">numpy.nan</span></code>.
Do not declare a <code class="docutils literal notranslate"><span class="pre">destpattern</span></code> for a custom
<code class="docutils literal notranslate"><span class="pre">fill_diagonal</span></code>.</p>
</dd>
<dt><strong>n_processes</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>}</span></dt><dd><p>Specify the number of cores to utilize. Default is 1 core.
Use <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> to request all available cores.
Specify the exact number of cores with an integer.</p>
</dd>
<dt><strong>gen_tree</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Rebuild shortest path <code class="docutils literal notranslate"><span class="pre">True</span></code>, or skip <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>snap_dist</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Flag as <code class="docutils literal notranslate"><span class="pre">True</span></code> to include the distance from the original
location to the snapped location along the network. Default
is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>nearest</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></span></dt><dd><p>An array of shape (n,m) storing distances between all
source and destination points.</p>
</dd>
<dt><strong>tree_nearest</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Nearest network node to point pattern vertex shortest
path lookup. The values of the dictionary are a tuple
of the nearest source vertex and the nearest destination
vertex to query the lookup tree. If two observations are
snapped to the same network arc a flag of -.1 is set for
both the source and destination network vertex
indicating the same arc is used while also raising an
<code class="docutils literal notranslate"><span class="pre">IndexError</span></code> when rebuilding the path.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a network instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observations to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;crimes.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Calculate all distances between observations in the <code class="docutils literal notranslate"><span class="pre">crimes</span></code> dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s2s_dist</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">allneighbordistances</span><span class="p">(</span><span class="s2">&quot;crimes&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If calculating a <code class="docutils literal notranslate"><span class="pre">type-a</span></code> to <code class="docutils literal notranslate"><span class="pre">type-a</span></code> distance matrix
the distance between an observation and itself is <code class="docutils literal notranslate"><span class="pre">nan</span></code> and
the distance between one observation and another will be positive value.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s2s_dist</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">s2s_dist</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(np.float64(nan), np.float64(3105.189475447081))</span>
</pre></div>
</div>
<p>If calculating a <code class="docutils literal notranslate"><span class="pre">type-a</span></code> to <code class="docutils literal notranslate"><span class="pre">type-b</span></code> distance matrix
the distance between all observations will likely be positive
values, may be zero (or approximately zero), but will never be negative.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;schools.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;schools&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2d_dist</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">allneighbordistances</span><span class="p">(</span><span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">destpattern</span><span class="o">=</span><span class="s2">&quot;schools&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">s2d_dist</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">s2d_dist</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">array([4520.72354, 6340.42297])</span>
</pre></div>
</div>
<p>Shortest paths can also be reconstructed when desired by
setting the <code class="docutils literal notranslate"><span class="pre">gen_tree</span></code> keyword argument to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Here
it is shown that the shortest path between school <code class="docutils literal notranslate"><span class="pre">6</span></code> and
school <code class="docutils literal notranslate"><span class="pre">7</span></code> flows along network arcs through network
vertices <code class="docutils literal notranslate"><span class="pre">173</span></code> and <code class="docutils literal notranslate"><span class="pre">64</span></code>. The <code class="docutils literal notranslate"><span class="pre">ntw.network_trees</span></code> attribute
may then be queried for the network elements comprising that path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d2d_dist</span><span class="p">,</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">allneighbordistances</span><span class="p">(</span><span class="s2">&quot;schools&quot;</span><span class="p">,</span> <span class="n">gen_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="p">[(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>
<span class="go">(173, 64)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.compute_distance_to_vertices">
<span class="sig-name descname"><span class="pre">compute_distance_to_vertices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.compute_distance_to_vertices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.compute_distance_to_vertices" title="Link to this definition">¶</a></dt>
<dd><p>Given an observation on a network arc, return the distance
to the two vertices that bound that end.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>x</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The x-coordinate of the snapped point.</p>
</dd>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The y-coordinate of the snapped point.</p>
</dd>
<dt><strong>arc</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#tuple" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a></span></dt><dd><p>The (vtx0, vtx1) representation of the network arc.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>d1</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The distance to vtx0. Always the vertex with the lesser ID.</p>
</dd>
<dt><strong>d2</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The distance to vtx1. Always the vertex with the greater ID.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.compute_snap_dist">
<span class="sig-name descname"><span class="pre">compute_snap_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.compute_snap_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.compute_snap_dist" title="Link to this definition">¶</a></dt>
<dd><p>Given an observation snapped to a network arc, calculate the
distance from the original location to the snapped location.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>pattern</strong><span class="classifier"><a class="reference internal" href="spaghetti.PointPattern.html#spaghetti.PointPattern" title="spaghetti.PointPattern"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spaghetti.PointPattern</span></code></a></span></dt><dd><p>The point pattern object.</p>
</dd>
<dt><strong>idx</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The point ID.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>dist</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>The euclidean distance from original location to the snapped
location.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.contiguityweights">
<span class="sig-name descname"><span class="pre">contiguityweights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weightings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.contiguityweights"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.contiguityweights" title="Link to this definition">¶</a></dt>
<dd><p>Create a contiguity-based <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> object.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>graph</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Controls whether the <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> is generated
using the spatial representation (<code class="docutils literal notranslate"><span class="pre">False</span></code>) or the graph
representation (<code class="docutils literal notranslate"><span class="pre">True</span></code>). Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><strong>weightings</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>}</span></dt><dd><p>Dictionary of lists of weightings for each arc/edge. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt><strong>from_split</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Flag for whether the method is being called from within
<code class="docutils literal notranslate"><span class="pre">split_arcs()</span></code> (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or not (<code class="docutils literal notranslate"><span class="pre">False</span></code>). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>weights_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keyword arguments for <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">dict()</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>W</strong><span class="classifier"><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></span></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">W</span></code> representing the binary adjacency of the network.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>See <span id="id26">[<a class="reference internal" href="../references.html#id11" title="Sergio J. Rey and Luc Anselin. PySAL: A Python Library of Spatial Analytical Methods. The Review of Regional Studies, 37(1):5-27, 2007. URL: https://rrs.scholasticahq.com/article/8285.pdf.">RA07</a>]</span> for more details.</p>
<p class="rubric">Examples</p>
<p>Instantiate a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap point observations to the network with attribute information.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;crimes.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Find counts per network arc.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counts</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">count_per_link</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">ntw</span><span class="o">.</span><span class="n">pointpatterns</span><span class="p">[</span><span class="s2">&quot;crimes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">obs_to_arc</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counts</span><span class="p">[(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">165</span><span class="p">)]</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Create a contiguity-based <code class="docutils literal notranslate"><span class="pre">W</span></code> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">contiguityweights</span><span class="p">(</span><span class="n">graph</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">n_components</span>
<span class="go">(303, 1)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.count_per_link">
<span class="sig-name descname"><span class="pre">count_per_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obs_on</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.count_per_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.count_per_link" title="Link to this definition">¶</a></dt>
<dd><p>Compute the counts per arc or edge (link).</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>obs_on</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Dictionary of observations on the network.
Either in the form <code class="docutils literal notranslate"><span class="pre">{(&lt;LINK&gt;):{&lt;POINT_ID&gt;:(&lt;COORDS&gt;)}}</span></code>
or <code class="docutils literal notranslate"><span class="pre">{&lt;LINK&gt;:[(&lt;COORD&gt;),(&lt;COORD&gt;)]}</span></code>.</p>
</dd>
<dt><strong>graph</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Count observations on graph edges (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or
network arcs (<code class="docutils literal notranslate"><span class="pre">False</span></code>). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>counts</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Counts per network link in the form <code class="docutils literal notranslate"><span class="pre">{(&lt;LINK&gt;):&lt;COUNT&gt;}</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Note that this passes the <code class="docutils literal notranslate"><span class="pre">obs_to_arc</span></code> or <code class="docutils literal notranslate"><span class="pre">obs_to_edge</span></code> attribute
of a point pattern snapped to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observations to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;crimes.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counts</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">count_per_link</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">ntw</span><span class="o">.</span><span class="n">pointpatterns</span><span class="p">[</span><span class="s2">&quot;crimes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">obs_to_arc</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counts</span><span class="p">[(</span><span class="mi">140</span><span class="p">,</span> <span class="mi">142</span><span class="p">)]</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">())])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">287</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.distancebandweights">
<span class="sig-name descname"><span class="pre">distancebandweights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gen_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.distancebandweights"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.distancebandweights" title="Link to this definition">¶</a></dt>
<dd><p>Create distance-based weights.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>threshold</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>Distance threshold value.</p>
</dd>
<dt><strong>n_processes</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>}</span></dt><dd><p>Specify the number of cores to utilize. Default is 1 core.
Use <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> to request all available cores.
Specify the exact number of cores with an integer.</p>
</dd>
<dt><strong>gen_tree</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Rebuild shortest path with <code class="docutils literal notranslate"><span class="pre">True</span></code>, or skip with <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>weights_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keyword arguments for <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">dict()</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>w</strong><span class="classifier"><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></span></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">W</span></code> object representing the binary adjacency of
the network.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>See <span id="id27">[<a class="reference internal" href="../references.html#id12" title="Luc Anselin and Sergio J. Rey. Modern Spatial Econometrics in Practice: A Guide to GeoDa, GeoDaSpace and PySAL. GeoDa Press, Chicago, 2014.">AR14</a>]</span> and <span id="id28">[<a class="reference internal" href="../references.html#id13" title="Sergio J. Rey, Luc Anselin, Xun Li, Robert Pahle, Jason Laura, Wenwen Li, and Julia Koschinsky. Open Geospatial Analytics with PySAL. ISPRS International Journal of Geo-Information, 4(2):815–836, 2015. doi:doi:10.3390/ijgi4020815.">RAL+15</a>]</span> for more details
regarding spatial weights.</p>
<p class="rubric">Examples</p>
<p>Instantiate an instance of a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streets_file</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">in_data</span><span class="o">=</span><span class="n">streets_file</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a contiguity-based <code class="docutils literal notranslate"><span class="pre">W</span></code> object based on network distance, <code class="docutils literal notranslate"><span class="pre">500</span></code>
US feet in this case.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">distancebandweights</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">threshold</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">weights_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">silence_warnings</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Show the number of units in the <code class="docutils literal notranslate"><span class="pre">W</span></code> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">n</span>
<span class="go">230</span>
</pre></div>
</div>
<p>There are 7 components in the <code class="docutils literal notranslate"><span class="pre">W</span></code> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">n_components</span>
<span class="go">7</span>
</pre></div>
</div>
<p>There are <code class="docutils literal notranslate"><span class="pre">8</span></code> units with <code class="docutils literal notranslate"><span class="pre">3</span></code> neighbors in the <code class="docutils literal notranslate"><span class="pre">W</span></code> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">histogram</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">(np.int64(8), np.int64(3))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.enum_links_vertex">
<span class="sig-name descname"><span class="pre">enum_links_vertex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.enum_links_vertex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.enum_links_vertex" title="Link to this definition">¶</a></dt>
<dd><p>Returns the arcs (links) adjacent to vertices.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>v0</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The vertex ID.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>links</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>List of tuple arcs adjacent to the vertex.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create an instance of a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Enumerate the links/arcs that are adjacent to vertex <code class="docutils literal notranslate"><span class="pre">24</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">enum_links_vertex</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<span class="go">[(24, 48), (24, 25), (24, 26)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.extractgraph">
<span class="sig-name descname"><span class="pre">extractgraph</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.extractgraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.extractgraph" title="Link to this definition">¶</a></dt>
<dd><p>Using the existing network representation, create a
graph-theoretic representation by removing all vertices with a
neighbor incidence of two (non-articulation points). That is, we
assume these vertices are bridges between vertices with higher
or lower incidence.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.full_distance_matrix">
<span class="sig-name descname"><span class="pre">full_distance_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_processes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gen_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.full_distance_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.full_distance_matrix" title="Link to this definition">¶</a></dt>
<dd><p>All vertex-to-vertex distances on a network. This method
is called from within <code class="docutils literal notranslate"><span class="pre">allneighbordistances()</span></code>,
<code class="docutils literal notranslate"><span class="pre">nearestneighbordistances()</span></code>, and <code class="docutils literal notranslate"><span class="pre">distancebandweights()</span></code>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>n_processes</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>Specify the number of cores to utilize. Default is 1 core.
Use <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> to request all available cores.
Specify the exact number of cores with an integer.</p>
</dd>
<dt><strong>gen_tree</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Rebuild shortest path <code class="docutils literal notranslate"><span class="pre">True</span></code>, or skip <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Based on <span id="id29">[<a class="reference internal" href="../references.html#id2" title="E. W. Dijkstra. A Note on Two Problems in Connexion with Graphs. Numerische Mathematik, 1(1):269–271, 1959. doi:10.1007/BF01386390.">Dij59</a>]</span> and <span id="id30">[<a class="reference internal" href="../references.html#id5" title="Atsuyki Okabe and Kokichi Sugihara. Basic Computational Methods for Network Spatial Analysis, chapter 3, pages 45-80. John Wiley &amp; Sons, Ltd, 2012. doi:10.1002/9781119967101.ch3.">OS12a</a>]</span>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.identify_components">
<span class="sig-name descname"><span class="pre">identify_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.identify_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.identify_components" title="Link to this definition">¶</a></dt>
<dd><p>Identify connected component information from a
<code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> object</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>w</strong><span class="classifier"><a class="reference external" href="https://pysal.org/libpysal/generated/libpysal.weights.W.html#libpysal.weights.W" title="(in libpysal v4.11.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></span></dt><dd><p>Weights object created from the network segments (either
raw or graph-theoretic).</p>
</dd>
<dt><strong>graph</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Flag for a raw network (<code class="docutils literal notranslate"><span class="pre">False</span></code>) or graph-theoretic network
(<code class="docutils literal notranslate"><span class="pre">True</span></code>). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.loadnetwork">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">loadnetwork</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.loadnetwork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.loadnetwork" title="Link to this definition">¶</a></dt>
<dd><p>Load a network from a binary file saved on disk.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>filename</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>The filename where the network is saved.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>self</strong><span class="classifier"><a class="reference internal" href="#spaghetti.Network" title="spaghetti.Network"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spaghetti.Network</span></code></a></span></dt><dd><p>A pre-computed <code class="docutils literal notranslate"><span class="pre">spaghetti</span></code> network object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.nearestneighbordistances">
<span class="sig-name descname"><span class="pre">nearestneighbordistances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sourcepattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destpattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gen_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_dists</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snap_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_zero_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.nearestneighbordistances"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.nearestneighbordistances" title="Link to this definition">¶</a></dt>
<dd><p>Compute the interpattern nearest neighbor distances or the
intrapattern nearest neighbor distances between a source
pattern and a destination pattern.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>sourcepattern</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>The key of a point pattern snapped to the network.</p>
</dd>
<dt><strong>destpattern</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>(Optional) The key of a point pattern snapped to the
network.</p>
</dd>
<dt><strong>n_processes</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>}</span></dt><dd><p>Specify the number of cores to utilize. Default is 1 core.
Use <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> to request all available cores.
Specify the exact number of cores with an integer.</p>
</dd>
<dt><strong>gen_tree</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Rebuild shortest path <code class="docutils literal notranslate"><span class="pre">True</span></code>, or skip <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>all_dists</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></span></dt><dd><p>An array of shape <span class="math notranslate nohighlight">\((n,n)\)</span> storing distances between all
points.</p>
</dd>
<dt><strong>snap_dist</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Flag as <code class="docutils literal notranslate"><span class="pre">True</span></code> to include the distance from the original
location to the snapped location along the network. Default
is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><strong>keep_zero_dist</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Include zero values in minimum distance <code class="docutils literal notranslate"><span class="pre">True</span></code> or exclude
<code class="docutils literal notranslate"><span class="pre">False</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>. If the source pattern is the
same as the destination pattern the diagonal is filled with
<code class="docutils literal notranslate"><span class="pre">numpy.nan</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>nearest</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Nearest neighbor distances keyed by the source point ID with
the value as as tuple of lists containing
nearest destination point ID(s) and distance.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Instantiate a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observations to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;crimes.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;crimes&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Fetch nearest neighbor distances while (potentially)
keeping neighbors that have been geocoded directly on top of
each other. Here it is demonstrated that observation <code class="docutils literal notranslate"><span class="pre">11</span></code>
has two neighbors (<code class="docutils literal notranslate"><span class="pre">18</span></code> and <code class="docutils literal notranslate"><span class="pre">19</span></code>) at an exactly equal distance.
However, observation <code class="docutils literal notranslate"><span class="pre">18</span></code> is shown to have only one neighbor
(<code class="docutils literal notranslate"><span class="pre">18</span></code>) with no distance between them.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nn</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">nearestneighbordistances</span><span class="p">(</span><span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">keep_zero_dist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nn</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">nn</span><span class="p">[</span><span class="mi">18</span><span class="p">]</span>
<span class="go">(([18, 19], np.float64(165.33982412719126)), ([19], np.float64(0.0)))</span>
</pre></div>
</div>
<p>This may be remedied by setting the <code class="docutils literal notranslate"><span class="pre">keep_zero_dist</span></code> keyword
argument to <code class="docutils literal notranslate"><span class="pre">False</span></code>. With this parameter set, observation <code class="docutils literal notranslate"><span class="pre">11</span></code>
still has the same neighbor/distance values, but
observation <code class="docutils literal notranslate"><span class="pre">18</span></code> now has a single nearest neighbor (<code class="docutils literal notranslate"><span class="pre">11</span></code>)
with a non-zero, postive distance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nn</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">nearestneighbordistances</span><span class="p">(</span><span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">keep_zero_dist</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nn</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">nn</span><span class="p">[</span><span class="mi">18</span><span class="p">]</span>
<span class="go">(([18, 19], np.float64(165.33982412719126)), ([11], np.float64(165.33982412719126)))</span>
</pre></div>
</div>
<p>There are valid reasons for both retaining or masking zero distance
neighbors. When conducting analysis, thought must be given as to
which model more accurately represents the specific scenario.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.savenetwork">
<span class="sig-name descname"><span class="pre">savenetwork</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.savenetwork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.savenetwork" title="Link to this definition">¶</a></dt>
<dd><p>Save a network to disk as a binary file.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>filename</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>The filename where the network should be saved. This should
be a full path or it will be saved in the current directory.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a network instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Save out the network instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">savenetwork</span><span class="p">(</span><span class="s2">&quot;mynetwork.pkl&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.shortest_paths">
<span class="sig-name descname"><span class="pre">shortest_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pp_orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pp_dest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.shortest_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.shortest_paths" title="Link to this definition">¶</a></dt>
<dd><p>Return the shortest paths between observation points as
<code class="docutils literal notranslate"><span class="pre">libpysal.cg.Chain</span></code> objects.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>tree</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>See <code class="docutils literal notranslate"><span class="pre">tree_nearest</span></code> in
<code class="docutils literal notranslate"><span class="pre">spaghetti.Network.allneighbordistances()</span></code>.</p>
</dd>
<dt><strong>pp_orig</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>Origin point pattern for shortest paths.
See <code class="docutils literal notranslate"><span class="pre">name</span></code> in <code class="docutils literal notranslate"><span class="pre">spaghetti.Network.snapobservations()</span></code>.</p>
</dd>
<dt><strong>pp_dest</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>Destination point pattern for shortest paths.
See <code class="docutils literal notranslate"><span class="pre">name</span></code> in <code class="docutils literal notranslate"><span class="pre">spaghetti.Network.snapobservations()</span></code>.
Defaults <code class="docutils literal notranslate"><span class="pre">pp_orig</span></code> if not declared.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>paths</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></span></dt><dd><p>The shortest paths between observations as geometric objects.
Each element of the list is a list where the first element
is an origin-destination pair tuple and the second
element is a <code class="docutils literal notranslate"><span class="pre">libpysal.cg.Chain</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3.12/library/exceptions.html#AttributeError" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AttributeError</span></code></a></dt><dd><p>This exception is raised when an attempt to extract shortest
path geometries is being made that but the <code class="docutils literal notranslate"><span class="pre">network_trees</span></code>
attribute does not exist within the network object.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Instantiate a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observations to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;schools.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;schools&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create shortest path trees between observations.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">allneighbordistances</span><span class="p">(</span><span class="s2">&quot;schools&quot;</span><span class="p">,</span> <span class="n">gen_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Generate geometric objects from trees.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">shortest_paths</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s2">&quot;schools&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Extract the first path, which is between observations
<code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(0, 1)</span>
</pre></div>
</div>
<p>The are <code class="docutils literal notranslate"><span class="pre">n</span></code> vertices in the path between observations
<code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.simulate_observations">
<span class="sig-name descname"><span class="pre">simulate_observations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distribution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'uniform'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.simulate_observations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.simulate_observations" title="Link to this definition">¶</a></dt>
<dd><p>Generate a simulated point pattern on the network.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>count</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>The number of points to create.</p>
</dd>
<dt><strong>distribution</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>A distribution of random points. Currently, the only
supported distribution is uniform.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>random_pts</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keys are the edge tuple. Values are lists of new point coordinates.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference external" href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.uniform.html#numpy.random.Generator.uniform" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random.Generator.uniform</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>Instantiate a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Snap observations to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;crimes.shp&quot;</span><span class="p">),</span> <span class="s2">&quot;crimes&quot;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Isolate the number of points in the dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">npts</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">pointpatterns</span><span class="p">[</span><span class="s2">&quot;crimes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">npoints</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">npts</span>
<span class="go">287</span>
</pre></div>
</div>
<p>Simulate <code class="docutils literal notranslate"><span class="pre">npts</span></code> number of points along the network
in a <cite>uniform</cite> distribution.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sim</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">simulate_observations</span><span class="p">(</span><span class="n">npts</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">SimulatedPointPattern</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sim</span><span class="o">.</span><span class="n">npoints</span>
<span class="go">287</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.snapobservations">
<span class="sig-name descname"><span class="pre">snapobservations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idvariable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.snapobservations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.snapobservations" title="Link to this definition">¶</a></dt>
<dd><p>Snap a point pattern shapefile to a network object. The
point pattern is stored in the <code class="docutils literal notranslate"><span class="pre">network.pointpattern</span></code>
attribute of the network object.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>in_data</strong><span class="classifier">{<a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.0.0rc1.dev+3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>}</span></dt><dd><p>The input geographic data. Either (1) a path to a
shapefile (str); or (2) a <code class="docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code>.</p>
</dd>
<dt><strong>name</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>Name to be assigned to the point dataset.</p>
</dd>
<dt><strong>idvariable</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>Column name to be used as the ID variable.</p>
</dd>
<dt><strong>attribute</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Defines whether attributes should be extracted. <code class="docutils literal notranslate"><span class="pre">True</span></code> for
attribute extraction. <code class="docutils literal notranslate"><span class="pre">False</span></code> for no attribute extraction.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See <span id="id31">[<a class="reference internal" href="../references.html#id15" title="James D. Gaboardi, David C. Folch, and Mark W. Horner. Connecting Points to Spatial Networks: Effects on Discrete Optimization Models. Geographical Analysis, 52:299–322, 2020. doi:10.1111/gean.12211.">GFH20</a>]</span> for a detailed discussion on
the modeling consequences of snapping points to spatial networks.</p>
<p class="rubric">Examples</p>
<p>Instantiate a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streets_file</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">in_data</span><span class="o">=</span><span class="n">streets_file</span><span class="p">)</span>
</pre></div>
</div>
<p>Snap observations to the network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pt_str</span> <span class="o">=</span> <span class="s2">&quot;crimes&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_data</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">pt_str</span><span class="o">+</span><span class="s2">&quot;.shp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">snapobservations</span><span class="p">(</span><span class="n">in_data</span><span class="p">,</span> <span class="n">pt_str</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Isolate the number of points in the dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span><span class="o">.</span><span class="n">pointpatterns</span><span class="p">[</span><span class="n">pt_str</span><span class="p">]</span><span class="o">.</span><span class="n">npoints</span>
<span class="go">287</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spaghetti.Network.split_arcs">
<span class="sig-name descname"><span class="pre">split_arcs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split_param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'distance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spaghetti/network.html#Network.split_arcs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spaghetti.Network.split_arcs" title="Link to this definition">¶</a></dt>
<dd><p>Split all network arcs at either a fixed distance or fixed count.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>split_param</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>}</span></dt><dd><p>Either the number of desired resultant split arcs or
the distance at which arcs are split.</p>
</dd>
<dt><strong>split_by</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>Either <code class="docutils literal notranslate"><span class="pre">'distance'</span></code> or <code class="docutils literal notranslate"><span class="pre">'count'</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">'distance'</span></code>.</p>
</dd>
<dt><strong>w_components</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to not record connected components from a
<code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code> object. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><strong>weights_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>Keyword arguments for <code class="docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">dict()</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>split_network</strong><span class="classifier"><a class="reference internal" href="#spaghetti.Network" title="spaghetti.Network"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spaghetti.Network</span></code></a></span></dt><dd><p>A newly instantiated <code class="docutils literal notranslate"><span class="pre">spaghetti.Network</span></code> object.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Instantiate a network.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spaghetti</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">libpysal</span> <span class="kn">import</span> <span class="n">examples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ntw</span> <span class="o">=</span> <span class="n">spaghetti</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;streets.shp&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Split the network into a segments of 200 distance units in length
(US feet in this case).
This will include “remainder” segments unless the network is
comprised of arcs with lengths exactly divisible by <code class="docutils literal notranslate"><span class="pre">distance</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n200</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">split_arcs</span><span class="p">(</span><span class="mf">200.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">n200</span><span class="o">.</span><span class="n">arcs</span><span class="p">)</span>
<span class="go">688</span>
</pre></div>
</div>
<p>The number of arcs within the new object can be accessed via the
weights object, as well. These counts will be equal.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">n200</span><span class="o">.</span><span class="n">arcs</span><span class="p">)</span> <span class="o">==</span> <span class="n">n200</span><span class="o">.</span><span class="n">w_network</span><span class="o">.</span><span class="n">n</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Neighboring arcs can also be queried through the weight object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n200</span><span class="o">.</span><span class="n">w_network</span><span class="o">.</span><span class="n">neighbors</span><span class="p">[</span><span class="mi">72</span><span class="p">,</span><span class="mi">392</span><span class="p">]</span>
<span class="go">[(71, 72), (72, 252), (72, 391), (392, 393)]</span>
</pre></div>
</div>
<p>Network arcs can also be split by a specified number of divisions with
the <code class="docutils literal notranslate"><span class="pre">split_by</span></code> keyword set to <code class="docutils literal notranslate"><span class="pre">'count'</span></code>, which is <code class="docutils literal notranslate"><span class="pre">'distance'</span></code> by
default. For example, each arc can be split into 2 equal parts.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span> <span class="o">=</span> <span class="n">ntw</span><span class="o">.</span><span class="n">split_arcs</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">split_by</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">n2</span><span class="o">.</span><span class="n">arcs</span><span class="p">)</span>
<span class="go">606</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/spaghetti.Network.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2017-, pysal developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>